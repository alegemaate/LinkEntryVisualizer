import React, { useState, useEffect } from "react";
import LinkEntry from "../components/LinkEntry";

export default function HomeView() {
  const [input, setInput] = useState(
    `[{"url": "https://adsgames.net/", "depth": 0, "internal": ["https://adsgames.net/games/deepspace", "https://adsgames.net/about", "https://adsgames.net/games/minesweeper", "https://adsgames.net/games/robotflier", "https://adsgames.net/contact", "https://adsgames.net/games/jimsalienadventure", "https://adsgames.net/games/jumpingjimothy", "https://adsgames.net/games/jimfarm", "https://adsgames.net/games/superarcherman", "https://adsgames.net/games/solitaire", "https://adsgames.net/links", "https://adsgames.net/nav-button", "https://adsgames.net/members/", "https://adsgames.net/games/brickbreaker", "https://adsgames.net/games/"], "external": ["https://assets.adsgames.net/", "https://twitter.com/adsgames", "https://reddit.com/r/adsgames", "https://learn.adsgames.net/", "https://adsgames.net", "https://facebook.com/adsgames"], "status": 200}, {"url": "https://adsgames.net/games/solitaire", "depth": 1, "internal": ["https://adsgames.net/about", "https://adsgames.net/contact", "https://adsgames.net/links", "https://adsgames.net/nav-button", "https://adsgames.net/members/", "https://adsgames.net/games/"], "external": ["https://assets.adsgames.net/", "https://twitter.com/adsgames", "https://reddit.com/r/adsgames", "https://learn.adsgames.net/", "https://adsgames.net", "https://facebook.com/adsgames"], "status": 200}, {"url": "https://adsgames.net/games/minesweeper", "depth": 1, "internal": ["https://adsgames.net/about", "https://adsgames.net/contact", "https://adsgames.net/links", "https://adsgames.net/nav-button", "https://adsgames.net/members/", "https://adsgames.net/games/"], "external": ["https://assets.adsgames.net/", "https://twitter.com/adsgames", "https://reddit.com/r/adsgames", "https://learn.adsgames.net/", "https://adsgames.net", "https://facebook.com/adsgames"], "status": 200}, {"url": "https://adsgames.net/games/superarcherman", "depth": 1, "internal": ["https://adsgames.net/about", "https://adsgames.net/contact", "https://adsgames.net/links", "https://adsgames.net/nav-button", "https://adsgames.net/members/", "https://adsgames.net/games/"], "external": ["https://assets.adsgames.net/", "https://twitter.com/adsgames", "https://reddit.com/r/adsgames", "https://learn.adsgames.net/", "https://adsgames.net", "https://facebook.com/adsgames"], "status": 200}, {"url": "https://adsgames.net/games/deepspace", "depth": 1, "internal": ["https://adsgames.net/about", "https://adsgames.net/contact", "https://adsgames.net/links", "https://adsgames.net/nav-button", "https://adsgames.net/members/", "https://adsgames.net/games/"], "external": ["https://assets.adsgames.net/", "https://twitter.com/adsgames", "https://reddit.com/r/adsgames", "https://learn.adsgames.net/", "https://adsgames.net", "https://facebook.com/adsgames"], "status": 200}, {"url": "https://adsgames.net/games/jumpingjimothy", "depth": 1, "internal": ["https://adsgames.net/about", "https://adsgames.net/contact", "https://adsgames.net/links", "https://adsgames.net/nav-button", "https://adsgames.net/members/", "https://adsgames.net/games/"], "external": ["https://assets.adsgames.net/", "https://twitter.com/adsgames", "https://reddit.com/r/adsgames", "https://learn.adsgames.net/", "https://adsgames.net", "https://facebook.com/adsgames"], "status": 200}, {"url": "https://adsgames.net/nav-button", "depth": 1, "internal": [], "external": [], "status": 404}, {"url": "https://adsgames.net/games/jimsalienadventure", "depth": 1, "internal": ["https://adsgames.net/about", "https://adsgames.net/contact", "https://adsgames.net/links", "https://adsgames.net/nav-button", "https://adsgames.net/members/", "https://adsgames.net/games/"], "external": ["https://assets.adsgames.net/", "https://twitter.com/adsgames", "https://reddit.com/r/adsgames", "https://learn.adsgames.net/", "https://adsgames.net", "https://facebook.com/adsgames"], "status": 200}, {"url": "https://adsgames.net/games/jimfarm", "depth": 1, "internal": ["https://adsgames.net/about", "https://adsgames.net/contact", "https://adsgames.net/links", "https://adsgames.net/nav-button", "https://adsgames.net/members/", "https://adsgames.net/games/"], "external": ["https://assets.adsgames.net/", "https://twitter.com/adsgames", "https://reddit.com/r/adsgames", "https://learn.adsgames.net/", "https://adsgames.net", "https://facebook.com/adsgames"], "status": 200}, {"url": "https://adsgames.net/contact", "depth": 1, "internal": ["https://adsgames.net/about", "https://adsgames.net/contact", "https://adsgames.net/links", "https://adsgames.net/nav-button", "https://adsgames.net/members/", "https://adsgames.net/games/"], "external": ["https://assets.adsgames.net/", "https://plus.google.com/+adsgamesnet", "https://twitter.com/adsgames", "https://reddit.com/r/adsgames", "http://facebook.com/adsgames", "https://learn.adsgames.net/", "https://adsgames.net", "https://facebook.com/adsgames"], "status": 200}, {"url": "https://adsgames.net/games/brickbreaker", "depth": 1, "internal": ["https://adsgames.net/about", "https://adsgames.net/contact", "https://adsgames.net/links", "https://adsgames.net/nav-button", "https://adsgames.net/members/", "https://adsgames.net/games/"], "external": ["https://assets.adsgames.net/", "https://twitter.com/adsgames", "https://reddit.com/r/adsgames", "https://learn.adsgames.net/", "https://adsgames.net", "https://facebook.com/adsgames"], "status": 200}, {"url": "https://adsgames.net/members/", "depth": 1, "internal": ["https://adsgames.net/about", "https://adsgames.net/register", "https://adsgames.net/contact", "https://adsgames.net/links", "https://adsgames.net/nav-button", "https://adsgames.net/members/", "https://adsgames.net/games/"], "external": ["https://assets.adsgames.net/", "https://twitter.com/adsgames", "https://reddit.com/r/adsgames", "https://learn.adsgames.net/", "https://adsgames.net", "https://facebook.com/adsgames"], "status": 200}, {"url": "https://adsgames.net/games/", "depth": 1, "internal": ["https://adsgames.net/games/jumpingjimothy", "https://adsgames.net/games/brickbreaker", "https://adsgames.net/games/pong", "https://adsgames.net/games/slimeknight", "https://adsgames.net/games/spacefighter", "https://adsgames.net/games/mazes", "https://adsgames.net/games/solitaire", "https://adsgames.net/about", "https://adsgames.net/games/jimfarm", "https://adsgames.net/games/superarcherman", "https://adsgames.net/games/breaker", "https://adsgames.net/games/marblemaze", "https://adsgames.net/nav-button", "https://adsgames.net/members/", "https://adsgames.net/games/", "https://adsgames.net/games/minersbay", "https://adsgames.net/games/memory", "https://adsgames.net/games/minesweeper", "https://adsgames.net/games/robotflier", "https://adsgames.net/contact", "https://adsgames.net/games/mordor", "https://adsgames.net/games/jimsalienadventure", "https://adsgames.net/games/deepspace", "https://adsgames.net/links", "https://adsgames.net/games/tictactoe", "https://adsgames.net/games/platforms"], "external": ["https://assets.adsgames.net/", "https://twitter.com/adsgames", "https://reddit.com/r/adsgames", "https://learn.adsgames.net/", "https://adsgames.net", "https://facebook.com/adsgames"], "status": 200}, {"url": "https://adsgames.net/games/robotflier", "depth": 1, "internal": ["https://adsgames.net/about", "https://adsgames.net/contact", "https://adsgames.net/links", "https://adsgames.net/nav-button", "https://adsgames.net/members/", "https://adsgames.net/games/"], "external": ["https://assets.adsgames.net/", "https://twitter.com/adsgames", "https://reddit.com/r/adsgames", "https://learn.adsgames.net/", "https://adsgames.net", "https://facebook.com/adsgames"], "status": 200}, {"url": "https://adsgames.net/links", "depth": 1, "internal": ["https://adsgames.net/about", "https://adsgames.net/contact", "https://adsgames.net/links", "https://adsgames.net/nav-button", "https://adsgames.net/members/", "https://adsgames.net/games/"], "external": ["https://assets.adsgames.net/", "https://twitter.com/adsgames", "https://reddit.com/r/adsgames", "https://learn.adsgames.net/", "https://adsgames.net", "https://facebook.com/adsgames"], "status": 200}, {"url": "https://adsgames.net/about", "depth": 1, "internal": ["https://adsgames.net/about", "https://adsgames.net/contact", "https://adsgames.net/links", "https://adsgames.net/nav-button", "https://adsgames.net/members/", "https://adsgames.net/games/"], "external": ["https://assets.adsgames.net/", "https://twitter.com/adsgames", "https://reddit.com/r/adsgames", "https://learn.adsgames.net/", "https://adsgames.net", "https://facebook.com/adsgames"], "status": 200}]`
  );
  const [validInput, setValidInput] = useState([]);
  const [isValid, setIsValid] = useState(false);

  // Validate json
  useEffect(() => {
    try {
      setValidInput(JSON.parse(input));
      setIsValid(true);
    } catch (e) {
      setIsValid(false);
    }
  }, [input]);

  return (
    <div id="home">
      <h2 className="page-title-bottom">Paste Link Crawler output Below</h2>
      <p>Input - {isValid ? "Valid" : "Invalid"}</p>
      <textarea
        value={input}
        onChange={e => setInput(e.target.value)}
        rows="20"
      ></textarea>

      <p>Output</p>

      {validInput.map((link, index) => (
        <LinkEntry key={`${link.url}${index}`} {...link} />
      ))}
    </div>
  );
}
